(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{616:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/donorlist",function(){return r(9059)}])},5892:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var o=r(7294),a=r(512),n=r(4780),s=r(3188),i=r(9262),l=r(3013),d=r(8046),u=r(1588),c=r(4867);function p(e){return(0,c.ZP)("MuiDialogContentText",e)}(0,u.Z)("MuiDialogContentText",["root"]);var h=r(5893);let m=e=>{let{classes:t}=e,r=(0,n.Z)({root:["root"]},p,t);return{...t,...r}},f=(0,i.ZP)(d.Z,{shouldForwardProp:e=>(0,s.Z)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});var w=o.forwardRef(function(e,t){let r=(0,l.i)({props:e,name:"MuiDialogContentText"}),{children:o,className:n,...s}=r,i=m(s);return(0,h.jsx)(f,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:s,className:(0,a.Z)(i.root,n),...r,classes:i})})},9346:function(e,t,r){"use strict";var o=r(7294),a=r(512),n=r(4780),s=r(8046),i=r(9262),l=r(3013),d=r(1493),u=r(6529),c=r(5893);let p=e=>{let{classes:t}=e;return(0,n.Z)({root:["root"]},d.a,t)},h=(0,i.ZP)(s.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),m=o.forwardRef(function(e,t){let r=(0,l.i)({props:e,name:"MuiDialogTitle"}),{className:n,id:s,...i}=r,d=p(r),{titleId:m=s}=o.useContext(u.Z);return(0,c.jsx)(h,{component:"h2",className:(0,a.Z)(d.root,n),ownerState:r,ref:t,variant:"h6",id:null!=s?s:m,...i})});t.Z=m},9059:function(e,t,r){"use strict";r.r(t);var o=r(5893),a=r(7294),n=r(1441),s=r(8163),i=r(5733),l=r(9346),d=r(9131),u=r(5892),c=r(5008),p=r(7593),h=r(7484),m=r.n(h),f=r(1376);t.default=()=>{let[e,t]=(0,a.useState)(null),[r,h]=(0,a.useState)(!1),[w,v]=(0,a.useState)(""),[g,x]=(0,a.useState)([]),{hideLoader:N,showLoader:_}=(0,f.U)();(0,a.useEffect)(()=>{j()},[]);let j=async()=>{fetch("".concat(p._,"/api/approvalRequest/getAllrequests?requestType=donations"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"ngrok-skip-browser-warning":"true"}}).then(e=>e.json()).then(e=>{x(e.usersWithAge)}).catch(e=>console.error("Error:",e))},Z=(e,r)=>{t(e),v(r),h(!0)};return(0,o.jsxs)("div",{className:" w-full p-5",children:[(0,o.jsx)(n._,{rows:g,columns:[{field:"requestId",headerName:"Request ID",width:130},{field:"userName",headerName:"User Name",width:180},{field:"requestType",headerName:"Request Type",width:150},{field:"units",headerName:"Units",width:100},{field:"disease",headerName:"Disease",width:150},{field:"date",headerName:"Date",width:200,renderCell:e=>m()(e.row.date).format("YYYY-MM-DD")},{field:"approval_request_status",headerName:"Status",width:130,renderCell:e=>(null==e?void 0:e.row.approval_request_status)=="pending"?"Pending":(null==e?void 0:e.row.approval_request_status)=="approved"?(0,o.jsx)("span",{className:"text-green-500",children:"Approved"}):(0,o.jsx)("span",{className:"text-red-500",children:"Rejected"})},{field:"actions",headerName:"Actions",width:200,renderCell:e=>(null==e?void 0:e.row.approval_request_status)=="pending"?(0,o.jsxs)("div",{className:"space-x-2",children:[(0,o.jsx)(s.Z,{variant:"contained",color:"primary",size:"small",className:"bg-green-500 hover:bg-green-600",onClick:()=>Z(e.row,"approved"),children:"Approve"}),(0,o.jsx)(s.Z,{variant:"contained",color:"secondary",size:"small",className:"bg-red-500 hover:bg-red-600",onClick:()=>Z(e.row,"rejected"),children:"Reject"})]}):null}],pageSize:5,rowsPerPageOptions:[5],getRowId:e=>e.requestId,className:"bg-white shadow-md rounded-lg"}),(0,o.jsxs)(i.Z,{open:r,onClose:()=>h(!1),children:[(0,o.jsx)(l.Z,{children:"approve"===w?"Approve Request":"Reject Request"}),(0,o.jsx)(d.Z,{children:(0,o.jsxs)(u.Z,{children:["Are you sure you want to ",w," the request from ",null==e?void 0:e.userName,"?"]})}),(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(s.Z,{onClick:()=>h(!1),color:"primary",children:"Cancel"}),(0,o.jsx)(s.Z,{onClick:()=>{console.log("".concat(w," request ").concat(e.requestId)),h(!1),_(),fetch("".concat(p._,"/api/approvalRequest/reviewRequest"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json","ngrok-skip-browser-warning":"true"},body:JSON.stringify({requestId:e.requestId,approval_request_status:w})}).then(e=>e.json()).then(e=>{j(),N()})},color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}}},function(e){e.O(0,[650,374,441,58,888,774,179],function(){return e(e.s=616)}),_N_E=e.O()}]);