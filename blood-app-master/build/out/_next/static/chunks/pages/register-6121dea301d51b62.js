(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{5511:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return t(7970)}])},7970:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var r=t(5893),s=t(7294);t(8536);var l=t(1093),n=t(4e3),o=t(6799),i=t(5416),d=t(1197),u=t(5307),c=t(8163),m=t(6310),p=t(7409),h=t(7484),f=t.n(h),g=t(7593),_=t(1163),b=t(2398),w=t(7066);let x=m.Ry().shape({email:m.Z_().email("Invalid email").required("Email is required"),first_name:m.Z_().required("First name is required"),last_name:m.Z_().required("Last name is required"),password:m.Z_().min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character").required("Password is required")});function v(){let[e,a]=(0,s.useState)({email:"",first_name:"",last_name:"",password:"",dob:f()(new Date).format("YYYY-MM-DD"),blood_group:""});(0,_.useRouter)();let[t,m]=(0,s.useState)({}),[h,v]=(0,s.useState)(""),[j,y]=(0,s.useState)(""),[Z,N]=(0,s.useState)([]),Y=e=>{let{name:t,value:r}=e.target,s=e.target.value;("first_name"==e.target.name||"last_name"==e.target.name)&&(s=s.replace(/[^a-zA-Z ]/g,"")),a(e=>({...e,[t]:s})),m(e=>({...e,[t]:""}))},E=async()=>{try{return await x.validate(e,{abortEarly:!1}),!0}catch(a){let e={};return a.inner.forEach(a=>{e[a.path]=a.message}),m(e),!1}},S=async e=>{try{let a=await w.Z.post("".concat(g._).concat(b.Z.CREATE_USER),e);return 201===a.status&&v("Registration successful. You can now log in."),a.data.user}catch(e){throw e}finally{}},D=async t=>{if(t.preventDefault(),y(""),await E())try{S(e),a({email:"",first_name:"",last_name:"",password:"",dob:f()(new Date).format("YYYY-MM-DD"),blood_group:""}),m({})}catch(e){y("Failed to register",e)}};(0,s.useEffect)(()=>{C()},[]);let C=async()=>{let t=await fetch("".concat(g._,"/api/bloodSample/getBloodSamples"),{method:"GET",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"true"}}),r=await t.json();N(null==r?void 0:r.bloodSampleNames),a({...e,blood_group:(null==r?void 0:r.bloodSampleNames[0])||""})};return(0,r.jsx)("div",{className:"p-5  flex flex-col",style:{backgroundImage:"url(https://images.pexels.com/photos/12227661/pexels-photo-12227661.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1)",backgroundSize:"cover",backgroundPosition:"center",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"2rem",fontFamily:"Poppins, sans-serif"},children:(0,r.jsxs)("form",{onSubmit:D,className:"grid grid-cols-2 gap-4 justify-center items-center mt-10 bg-white p-10 rounded-lg shadow-lg md:w-[600px]",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold m-2 text-red-500",children:"Registration"}),j&&(0,r.jsx)(l.Z,{severity:"error",className:"col-span-2",children:j}),(0,r.jsx)(n.Z,{label:"Email",type:"email",name:"email",value:e.email,onChange:Y,fullWidth:!0,className:"col-span-2",error:!!t.email,helperText:t.email}),(0,r.jsx)(n.Z,{label:"First Name",name:"first_name",value:e.first_name,onChange:Y,fullWidth:!0,error:!!t.first_name,helperText:t.first_name}),(0,r.jsx)(n.Z,{label:"Last Name",name:"last_name",value:e.last_name,onChange:Y,fullWidth:!0,error:!!t.last_name,helperText:t.last_name}),(0,r.jsx)(n.Z,{label:"Password",type:"password",name:"password",value:e.password,onChange:Y,fullWidth:!0,error:!!t.password,helperText:t.password}),(0,r.jsx)(p.M,{label:"Date of Birth",format:"MMMM DD,YYYY",name:"dob",value:(null==e?void 0:e.dob)?f()(null==e?void 0:e.dob):f()(),onChange:t=>a({...e,dob:t.format("YYYY-MM-DD")})}),(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(i.Z,{id:"blood-group",children:"Blood Group"}),(0,r.jsxs)(d.Z,{labelId:"blood-group",label:"Blood Group",name:"blood_group",value:null==e?void 0:e.blood_group,onChange:Y,children:[(0,r.jsx)(u.Z,{value:"",children:(0,r.jsx)("em",{children:"None"})}),null==Z?void 0:Z.map(e=>(0,r.jsx)(u.Z,{value:e,children:e},e))]})]}),(0,r.jsx)(c.Z,{type:"submit",variant:"outlined",fullWidth:!0,className:"col-span-2",color:"error",children:"Register"}),h&&(0,r.jsx)(l.Z,{severity:"success",className:"col-span-2",children:h})]})})}function j(){return(0,r.jsx)(v,{})}}},function(e){e.O(0,[650,374,58,342,310,888,774,179],function(){return e(e.s=5511)}),_N_E=e.O()}]);